{"version":3,"sources":["main.js"],"names":["localSave","localStorage","getItem","localHash","JSON","parse","unitHash","$addBtn","$","render","remove","forEach","item","index","$newSiteUnit","insertBefore","on","e","window","open","$closeBtn","find","stopPropagation","splice","formalizeUnit","url","unit","t","replace","tn","str","prompt","indexOf","push","onbeforeunload","stringify","setItem","document","activeElement","querySelector","key","i","length","thumbnail","toLowerCase","URL"],"mappings":"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","file":"main.a8fbe56c.js","sourceRoot":"..\\src","sourcesContent":["let localSave = localStorage.getItem('hash');\r\nlet localHash = JSON.parse(localSave);\r\n\r\nlet unitHash = localHash || [\r\n  {\r\n    \"thumbnail\": \"a\",\r\n    \"title\": \"apple.com\",\r\n    \"URL\": \"https://www.apple.com\"\r\n  },\r\n  {\r\n    \"thumbnail\": \"b\",\r\n    \"title\": \"bilibili.com\",\r\n    \"URL\": \"https://www.bilibili.com\"\r\n  }\r\n];\r\n\r\nconst $addBtn = $('#add-btn');\r\n\r\nconst render = () => {\r\n\r\n  $('.site-unit').remove();\r\n\r\n  unitHash.forEach((item, index) => {\r\n\r\n    let $newSiteUnit = $(`<div class=\"site-unit\"><dt class=\"site-thumbnail\">${item['thumbnail']}</dt>\r\n    <dd class=\"site-title\">${item['title']}</dd><div class=\"close-btn\"><svg class=\"icon\"><use xlink:href=\"#icon-close\"></use></svg></div></div>`);\r\n\r\n    $newSiteUnit.insertBefore($addBtn);\r\n\r\n    $newSiteUnit.on('click', function (e) {\r\n      window.open(item['URL'], '_blank');\r\n    });\r\n\r\n    let $closeBtn = $newSiteUnit.find('.close-btn');\r\n    $closeBtn.on('click', function (e) {\r\n      e.stopPropagation();\r\n      unitHash.splice(index, 1);\r\n      render();\r\n    });\r\n  });\r\n};\r\n\r\nconst formalizeUnit = (url) => {\r\n  let unit = {};\r\n  let t = url.replace('https://', '')\r\n    .replace('http://', '')\r\n    .replace('www.', '')\r\n    .replace(/\\/.*/, '');\r\n  let tn = t[0];\r\n  unit[\"thumbnail\"] = tn;\r\n  unit[\"title\"] = t;\r\n  unit[\"URL\"] = url;\r\n  return unit;\r\n}\r\n\r\n$addBtn.on('click', function (e) {\r\n  let str = window.prompt('请输入网址');\r\n  if (str === null) { return }\r\n  if (str.indexOf('http') !== 0) {\r\n    str = 'https://' + str;\r\n  }\r\n  unitHash.push(formalizeUnit(str));\r\n  render();\r\n});\r\n\r\nwindow.onbeforeunload = function (e) {\r\n  const str = JSON.stringify(unitHash);\r\n  localStorage.setItem('hash', str);\r\n}\r\n\r\n$(document).on('keypress', (e) => {\r\n  // 如果当前搜索栏是激活状态，那就不要响应键盘跳转事件\r\n  if (document.activeElement === document.querySelector('.search-form > input')) { return }\r\n  \r\n  const { key } = e;\r\n  for (let i = 0; i < unitHash.length; i++) {\r\n    if (unitHash[i].thumbnail.toLowerCase() === key) {\r\n      window.open(unitHash[i].URL);\r\n    }\r\n  }\r\n})\r\n\r\nrender();"]}